__NUXT_JSONP__("/installation/dns-configuration", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N){return {data:[{document:{slug:"dns-configuration",description:"",title:"Domain & DNS Configuration",position:2.3,category:"Installation",toc:[{id:y,depth:p,text:z},{id:A,depth:p,text:B},{id:C,depth:p,text:D},{id:E,depth:p,text:F},{id:G,depth:p,text:H},{id:I,depth:p,text:J}],body:{type:"root",children:[{type:b,tag:h,props:{},children:[{type:a,value:"To work properly, you'll need to configure a number of DNS records for your Postal installation. Review the table below and create appropriate DNS records on your DNS server. You will need to enter the record names you choose in your "},{type:b,tag:f,props:{},children:[{type:a,value:K}]},{type:a,value:" configuration file."}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:"For this documentation we will assume you have allocated some IP addresses:"}]},{type:a,value:c},{type:b,tag:"ul",props:{},children:[{type:a,value:c},{type:b,tag:x,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:"192.168.1.3"}]},{type:a,value:" - IPv4 address for management, SMTP and other traffic"}]},{type:a,value:c},{type:b,tag:x,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:"192.168.1.4"}]},{type:a,value:" - IPv4 address for the \"fast\" web server (used for tracking)"}]},{type:a,value:c},{type:b,tag:x,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:"2a00:1234:abcd:1::3"}]},{type:a,value:" - IPv6 address for management, SMTP and other traffic"}]},{type:a,value:c},{type:b,tag:x,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:"2a00:1234:abcd:1::4"}]},{type:a,value:" - IPv6 address for the \"fast\" web server (used for tracking)"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:"We will assume that you want to set up everything on the "},{type:b,tag:f,props:{},children:[{type:a,value:"mail.yourdomain.com"}]},{type:a,value:" domain."}]},{type:a,value:c},{type:b,tag:q,props:{id:y},children:[{type:b,tag:r,props:{ariaHidden:s,href:"#a-records",tabIndex:t},children:[{type:b,tag:d,props:{className:[u,v]},children:[]}]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:"You'll need these records for accessing the API, management interface & SMTP server."}]},{type:a,value:c},{type:b,tag:l,props:{className:[m]},children:[{type:b,tag:n,props:{className:[o,w]},children:[{type:b,tag:f,props:{},children:[{type:a,value:"mail.yourdomain.com.         IN    A    192.168.1.3\nmail.yourdomain.com.         IN    AAAA 2a00:1234:abcd:1::3\n"}]}]}]},{type:a,value:c},{type:b,tag:q,props:{id:A},children:[{type:b,tag:r,props:{ariaHidden:s,href:"#spf-record",tabIndex:t},children:[{type:b,tag:d,props:{className:[u,v]},children:[]}]},{type:a,value:B}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:"You can configure a global SPF record for your mail server which means domains don't need to each individually reference your server IPs. This allows you to make changes in the future."}]},{type:a,value:c},{type:b,tag:l,props:{className:[m]},children:[{type:b,tag:n,props:{className:[o,w]},children:[{type:b,tag:f,props:{},children:[{type:a,value:"spf.mail.yourdomain.com.     IN    TXT   \"v=spf1 ip4:192.168.0.0\u002F28 ip6:2a00:1234:abcd:1::\u002F64 ~all\"\n"}]}]}]},{type:a,value:c},{type:b,tag:q,props:{id:C},children:[{type:b,tag:r,props:{ariaHidden:s,href:"#return-path",tabIndex:t},children:[{type:b,tag:d,props:{className:[u,v]},children:[]}]},{type:a,value:D}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:"The return path domain is the default domain that is used as the "},{type:b,tag:f,props:{},children:[{type:a,value:"MAIL FROM"}]},{type:a,value:" for all messages sent through a mail server. You should add DNS records as below."}]},{type:a,value:c},{type:b,tag:l,props:{className:[m]},children:[{type:b,tag:n,props:{className:[o,w]},children:[{type:b,tag:f,props:{},children:[{type:a,value:"rp.mail.yourdomain.com.      IN    A     192.168.1.3\nrp.mail.yourdomain.com.      IN    AAAA  2a00:1234:abcd:1::3\nrp.mail.yourdomain.com.      IN    MX    10 mail.yourdomain.com\nrp.mail.yourdomain.com.      IN    TXT   \"v=spf1 a mx include:spf.mail.yourdomain.com ~all\"\n"}]}]}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:"In addition to these, you'll need to enter a DKIM record. This differs depending on your installation. When the installation is initialised a key will be generated automatically. You can see the appropriate value for this record by running "},{type:b,tag:f,props:{},children:[{type:a,value:"postal default-dkim-record"}]},{type:a,value:" on the host."}]},{type:a,value:c},{type:b,tag:l,props:{className:[m]},children:[{type:b,tag:n,props:{className:[o,w]},children:[{type:b,tag:f,props:{},children:[{type:a,value:"postal._domainkey.rp.mail.yourdomain.com.      IN    TXT   \"v=DKIM1; t=s; h=sha256; p=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzipajyThkwNmZs0cBjghowttXe1FhxplkBljpk90tzCfkFWJ+QHsUCNGmsFXhRALBol8cC4YHks5R9cjvGsphEM8C4jV2Nef5TxofAXuOpV5tbI0H3pBQY1cmP6I82VDAchsmfADCW\u002F3XIFCPpYvnRFVlDnEQcuk4Ghl9LarhCZQqP8x7b38sPV6fcTrWL0HnNxEGAxRDiNWzGD1nEkp\u002Fm1o4STC7H8NvDbuZGkopmciDEE8cDxTbHGv7KRd72W5JewEx43nbtFUOEiv6D\u002FotwT1xN2XF3JkOBtD3VcH+KB\u002FzB6wwxJptNamw5kunskUoWwZwN488CpxxRF5tKPhCwIDAQAB;\"\n"}]}]}]},{type:a,value:c},{type:b,tag:q,props:{id:E},children:[{type:b,tag:r,props:{ariaHidden:s,href:"#route-domain",tabIndex:t},children:[{type:b,tag:d,props:{className:[u,v]},children:[]}]},{type:a,value:F}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:"If you wish to receive incoming e-mail by sending messages directly to created routes in Postal, you'll need to configure a domain for this just to point to your MX servers."}]},{type:a,value:c},{type:b,tag:l,props:{className:[m]},children:[{type:b,tag:n,props:{className:[o,w]},children:[{type:b,tag:f,props:{},children:[{type:a,value:"routes.mail.yourdomain.com.   IN    MX    10 mx.mail.yourdomain.com\n"}]}]}]},{type:a,value:c},{type:b,tag:q,props:{id:G},children:[{type:b,tag:r,props:{ariaHidden:s,href:"#tracking-domain",tabIndex:t},children:[{type:b,tag:d,props:{className:[u,v]},children:[]}]},{type:a,value:H}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:"To configure click & link tracking you'll need to configure a domain that will be used in rewritten links. This will point to the second IP address on your host. The second IP is used to distinguish traffic which is aimed at the management web server and that destined for the tracking web server."}]},{type:a,value:c},{type:b,tag:l,props:{className:[m]},children:[{type:b,tag:n,props:{className:[o,w]},children:[{type:b,tag:f,props:{},children:[{type:a,value:"track.mail.yourdomain.com.    IN    A     192.168.0.4\ntrack.mail.yourdomain.com.    IN    AAAA  2a00:1234:abcd:1::4\n"}]}]}]},{type:a,value:c},{type:b,tag:q,props:{id:I},children:[{type:b,tag:r,props:{ariaHidden:s,href:"#example-postal-configuration",tabIndex:t},children:[{type:b,tag:d,props:{className:[u,v]},children:[]}]},{type:a,value:J}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:"In your "},{type:b,tag:f,props:{},children:[{type:a,value:K}]},{type:a,value:" you should have something like that looks like the below,."}]},{type:a,value:c},{type:b,tag:l,props:{className:[m]},children:[{type:b,tag:n,props:{className:[o,"language-yaml"]},children:[{type:b,tag:f,props:{},children:[{type:b,tag:d,props:{className:[e,i,j]},children:[{type:a,value:"dns"}]},{type:b,tag:d,props:{className:[e,g]},children:[{type:a,value:k}]},{type:a,value:"\n  "},{type:b,tag:d,props:{className:[e,i,j]},children:[{type:a,value:"mx_records"}]},{type:b,tag:d,props:{className:[e,g]},children:[{type:a,value:k}]},{type:a,value:"\n    "},{type:b,tag:d,props:{className:[e,g]},children:[{type:a,value:L}]},{type:a,value:M},{type:b,tag:d,props:{className:[e,i,j]},children:[{type:a,value:"smtp_server_hostname"}]},{type:b,tag:d,props:{className:[e,g]},children:[{type:a,value:k}]},{type:a,value:M},{type:b,tag:d,props:{className:[e,i,j]},children:[{type:a,value:"spf_include"}]},{type:b,tag:d,props:{className:[e,g]},children:[{type:a,value:k}]},{type:a,value:" spf.mail.yourdomain.com\n  "},{type:b,tag:d,props:{className:[e,i,j]},children:[{type:a,value:"return_path"}]},{type:b,tag:d,props:{className:[e,g]},children:[{type:a,value:k}]},{type:a,value:" rp.mail.yourdomain.com\n  "},{type:b,tag:d,props:{className:[e,i,j]},children:[{type:a,value:"route_domain"}]},{type:b,tag:d,props:{className:[e,g]},children:[{type:a,value:k}]},{type:a,value:" routes.mail.yourdomain.com\n  "},{type:b,tag:d,props:{className:[e,i,j]},children:[{type:a,value:"track_domain"}]},{type:b,tag:d,props:{className:[e,g]},children:[{type:a,value:k}]},{type:a,value:" track.mail.yourdomain.com\n  "},{type:b,tag:d,props:{className:[e,i,j]},children:[{type:a,value:"dkim_identifier"}]},{type:b,tag:d,props:{className:[e,g]},children:[{type:a,value:k}]},{type:a,value:" postal\n  "},{type:b,tag:d,props:{className:[e,i,j]},children:[{type:a,value:"domain_verify_prefix"}]},{type:b,tag:d,props:{className:[e,g]},children:[{type:a,value:k}]},{type:a,value:" postal"},{type:b,tag:d,props:{className:[e,g]},children:[{type:a,value:L}]},{type:a,value:"verification\n  "},{type:b,tag:d,props:{className:[e,i,j]},children:[{type:a,value:"custom_return_path_prefix"}]},{type:b,tag:d,props:{className:[e,g]},children:[{type:a,value:k}]},{type:a,value:" psrp\n"}]}]}]}]},dir:"\u002Fen\u002Finstallation",path:"\u002Fen\u002Finstallation\u002Fdns-configuration",extension:".md",createdAt:N,updatedAt:N,to:"\u002Finstallation\u002Fdns-configuration"},prev:{slug:"upgrading",title:"Upgrading",to:"\u002Finstallation\u002Fupgrading"},next:{slug:"processes",title:"Processes",to:"\u002Finstallation\u002Fprocesses"}}],fetch:{},mutations:[]}}("text","element","\n","span","token","code","punctuation","p","key","atrule",":","div","nuxt-content-highlight","pre","line-numbers",2,"h2","a","true",-1,"icon","icon-link","language-text","li","a-records","A Records","spf-record","SPF Record","return-path","Return Path","route-domain","Route domain","tracking-domain","Tracking domain","example-postal-configuration","Example Postal Configuration","postal.yml","-"," mail.yourdomain.com\n  ","2021-07-28T18:00:08.940Z")));